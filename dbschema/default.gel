module default {

      global current_user := (
        assert_single((
            select User
            filter .identity = global ext::auth::ClientTokenIdentity
        ))
    );

    type User {
        multi identity: ext::auth::Identity {
            constraint exclusive;
            # on source delete delete target;
        }
        required email: str {
            constraint exclusive;
        }
        required firstName: str;
        required lastName: str;
    }
}
